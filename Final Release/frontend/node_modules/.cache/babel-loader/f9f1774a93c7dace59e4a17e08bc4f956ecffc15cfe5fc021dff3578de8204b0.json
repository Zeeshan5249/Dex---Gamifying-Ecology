{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\William\\\\Desktop\\\\UniFiles\\\\USYD\\\\2024-Semester2\\\\Java Application Frameworks\\\\Mon-09-12-Lab-Group-3-5\\\\frontend\\\\src\\\\pages\\\\logout\\\\logout.js\",\n  _s = $RefreshSig$();\nimport Template from '../template/template';\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Logout = props => {\n  _s();\n  const [error, set_error] = useState(props.default_error);\n  const navigate = useNavigate();\n  useEffect(() => {\n    log_out(sessionStorage.getItem('token'));\n  }, []);\n  const log_out = token => {\n    fetch('http://localhost:8080/api/logout', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'token': token\n      })\n    }).then(response => {\n      const status = response.status;\n      return response.text().then(body => {\n        return {\n          status,\n          body\n        };\n      });\n    }).then(({\n      status,\n      body\n    }) => {\n      let json_obj = JSON.parse(body);\n      set_error(\"\");\n      if (status != 200) {\n        set_error(json_obj['error']);\n        navigate(\"/myDex\");\n      } else {\n        sessionStorage.setItem('token', null);\n        navigate(\"/login\");\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Template, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(Logout, \"x4ZaQ3qK+efgt8KXg+lnkQdi+yg=\", false, function () {\n  return [useNavigate];\n});\n_c = Logout;\nexport default Logout;\nvar _c;\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"names":["Template","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","Logout","props","_s","error","set_error","default_error","navigate","log_out","sessionStorage","getItem","token","fetch","method","headers","body","JSON","stringify","then","response","status","text","json_obj","parse","setItem","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/William/Desktop/UniFiles/USYD/2024-Semester2/Java Application Frameworks/Mon-09-12-Lab-Group-3-5/frontend/src/pages/logout/logout.js"],"sourcesContent":["import Template from '../template/template';\nimport {useEffect, useState} from 'react';\nimport {useNavigate} from \"react-router-dom\";\n\nconst Logout = (props) => {\n    const [error, set_error] = useState(props.default_error);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        log_out(sessionStorage.getItem('token'));\n    },[]);\n  \n    const log_out = (token) => {\n        fetch('http://localhost:8080/api/logout', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            'token': token\n        })\n        }).then((response) => {\n            const status = response.status;\n            return response.text().then((body) => {\n            return { status, body };\n            });\n        }).then(({ status, body }) => {\n            let json_obj = JSON.parse(body);\n            set_error(\"\");\n            if (status != 200) {\n                set_error(json_obj['error']);\n                navigate(\"/myDex\");\n            } else {\n                sessionStorage.setItem('token', null)\n                navigate(\"/login\");\n            }\n        })\n    };\n\n\n  return (\n    <Template> \n    </Template>\n  );\n}\n\nexport default Logout;"],"mappings":";;AAAA,OAAOA,QAAQ,MAAM,sBAAsB;AAC3C,SAAQC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,SAAQC,WAAW,QAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,MAAM,GAAIC,KAAK,IAAK;EAAAC,EAAA;EACtB,MAAM,CAACC,KAAK,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAACK,KAAK,CAACI,aAAa,CAAC;EACxD,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACZY,OAAO,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EAC5C,CAAC,EAAC,EAAE,CAAC;EAEL,MAAMF,OAAO,GAAIG,KAAK,IAAK;IACvBC,KAAK,CAAC,kCAAkC,EAAE;MAC1CC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACjB,OAAO,EAAEN;MACb,CAAC;IACD,CAAC,CAAC,CAACO,IAAI,CAAEC,QAAQ,IAAK;MAClB,MAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAM;MAC9B,OAAOD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAACH,IAAI,CAAEH,IAAI,IAAK;QACtC,OAAO;UAAEK,MAAM;UAAEL;QAAK,CAAC;MACvB,CAAC,CAAC;IACN,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC;MAAEE,MAAM;MAAEL;IAAK,CAAC,KAAK;MAC1B,IAAIO,QAAQ,GAAGN,IAAI,CAACO,KAAK,CAACR,IAAI,CAAC;MAC/BV,SAAS,CAAC,EAAE,CAAC;MACb,IAAIe,MAAM,IAAI,GAAG,EAAE;QACff,SAAS,CAACiB,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5Bf,QAAQ,CAAC,QAAQ,CAAC;MACtB,CAAC,MAAM;QACHE,cAAc,CAACe,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;QACrCjB,QAAQ,CAAC,QAAQ,CAAC;MACtB;IACJ,CAAC,CAAC;EACN,CAAC;EAGH,oBACEP,OAAA,CAACL,QAAQ;IAAA8B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEf,CAAC;AAAAzB,EAAA,CAxCKF,MAAM;EAAA,QAESH,WAAW;AAAA;AAAA+B,EAAA,GAF1B5B,MAAM;AA0CZ,eAAeA,MAAM;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}